<!doctype html>
<html>
<head>
  <title>Drinking Water Safety Violations</title>
  <link rel="stylesheet" media="screen" href="index.css" />
  <h1>California Drinking Water
   <br>
 Water Systems Out of Compliance</h1>
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script src="https://d3js.org/d3-geo.v1.min.js"></script>
   <!-- https://medium.com/@amy.degenaro/introduction-to-digital-cartography-geojson-and-d3-js-c27f066aa84 -->
  <style>
    path {
      fill: lightgray;
      stroke: #000;
    }
    .graticule {
      fill: none;
      stroke: #ccc;
      stroke-width: .5px;
    }
    .foreground {
      fill: none;
      stroke: #333;
      stroke-width: 1.5px;
    }
  </style>
</head>

<body>

  <svg width="960" height="600"></svg>
  <script>
    // D3 JavaScript will go in here
const data = "data/cb_2014_us_county_5m.json";
    d3.json(data, drawMap)
const svg = d3.select("svg")
const myProjection = d3.geoAlbers().scale(2300).translate([1480, 350])
const path = d3.geoPath().projection(myProjection)
const graticule = d3.geoGraticule()

function drawMap(err, world) {
  var features = world.features
  if (err) throw err
  svg.append("path")
    //.datum(graticule)
    .attr("class", "graticule")
    .attr("d", path);
  svg.append("path")
    //.datum(graticule.outline)
    .attr("class", "foreground")
    .attr("d", path);
  svg.append("g")
    .selectAll("path")
    .data(features)
    .enter().append("path")
    .attr("d", path);
}

  </script>

  <span class="dates">Reporting period 2012 - Current *</span>


 <div class="selectors"></div>

  <div class="summary"></div>
  <div align="right">
    <button id="export-list" >Export</button>
</div>
  <div class="violating-systems"></div>
  <div class="selectors"></div>
  <script type="module" src="index.js"></script>
  <style>
.footnote {
color: gray;
    margin-bottom: 200px;
    margin-top: -100px;
    margin-left: 70px;
}
</style>


<p class="footnote">
    <b>* Current Data Source:</b>
    Community, Schools, Daycares, Public Water Systems Who Have Current Exceedance/Compliance Issues, <a href="https://www.waterboards.ca.gov/water_issues/programs/hr2w/#data">Human Right to Water Portal</a>, State Water Resources Control Board
<br>
  <br>
    <b>** Disclaimer:</b>
    Data contained in this display represents the information available on community and non-transient non-community (specifically schools and day cares) public drinking water systems
that are regulated by the State Water Resources Control Board (State Water Board) or Local Primacy Agency (LPA). Population total does not equal the actual total served by a public water system exceeding a primary state/federal drinking water standard by analyte because a water system can be out-of-compliance for multiple analytes resulting in duplication.
  </p>
</body>
</html>
